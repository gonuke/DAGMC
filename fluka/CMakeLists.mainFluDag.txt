# PROJECT (mainFluDAG)
# CMAKE_MINIMUM_REQUIRED(VERSION 2.6.4)
MESSAGE (STATUS "Building mainFluDAG")

# Make sure FLUPRO is defined
IF (NOT DEFINED FLUPRO)
	set (FLUPRO "$ENV{FLUPRO}")
ENDIF (NOT DEFINED FLUPRO)

ENABLE_LANGUAGE(Fortran)

SET (LIBS 
     ${DI_LIBS}
     ${FLUPRO}/libflukahp.a 
     gfortran
)
#SET (fluka_file ${FLUPRO}/usermvax/mgdraw.f)
#SET (fluka_includes ${FLUPRO}/flukapro)
#SET (fluka_libdir ${FLUPRO})
#ADD_CUSTOM_COMMAND(OUTPUT mgdraw.o
#       COMMAND gfortran -c ${fluka_file} -I${fluka_includes} 
#       DEPENDS ${FLUPRO}/usermvax/mgdraw.f
#       COMMENT "Custom command to compile mgdraw object with parenthetically named includes"
#       )
#ADD_CUSTOM_TARGET (mgdraw
#	        DEPENDS mgdraw.o)

# Create the executable that can call flukam_
ADD_EXECUTABLE( mainfludag 
                EXCLUDE_FROM_ALL
                mainFluDAG.cpp    )
TARGET_LINK_LIBRARIES(mainfludag ${LIBS})
INSTALL( TARGETS mainfludag RUNTIME DESTINATION bin)

#ADD_LIBRARY(fluka_library fluka_funcs.cpp)
#TARGET_LINK_LIBRARIES(fluka_library ${moablibs} ${FLUPRO}/libflukahp.a gfortran)

